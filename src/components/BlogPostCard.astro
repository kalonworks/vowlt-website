---
// Reusable blog post card component
// Displays a blog post preview with title, description, date, and tags
// Entire card is clickable while maintaining text selectability

import type { BlogPost } from "../utils/blog";
import { formatDate } from "../utils/date";
import { ROUTES } from "../constants";

interface Props {
  post: BlogPost;
}

const { post } = Astro.props;
---

{/*
  Clickable card pattern:
  - Link's ::after pseudo-element creates full-card clickable area
  - Child elements with z-10 can still be interactive (e.g., text selection)
  - Title is wrapped in link for proper hover styles and keyboard focus
*/}
<article
  class="group relative bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6 transition-all hover:shadow-lg hover:border-blue-300 dark:hover:border-blue-600"
>
  <a
    href={ROUTES.blogPost(post.id)}
    class="after:absolute after:inset-0 after:content-['']"
  >
    <h2
      class="text-2xl md:text-3xl font-bold text-gray-900 dark:text-gray-100 mb-3 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors"
    >
      {post.data.title}
    </h2>
  </a>

  <p class="relative z-10 text-gray-600 dark:text-gray-400 mb-4">
    {post.data.description}
  </p>

  <div
    class="relative z-10 flex items-center gap-4 text-sm text-gray-500 dark:text-gray-400"
  >
    <time datetime={post.data.pubDate.toISOString()}>
      {formatDate(post.data.pubDate)}
    </time>

    {
      post.data.tags && post.data.tags.length > 0 && (
        <div class="flex gap-2">
          {post.data.tags.map((tag) => (
            <span class="px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded text-xs">
              {tag}
            </span>
          ))}
        </div>
      )
    }
  </div>
</article>
